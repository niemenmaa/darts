(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();let l={noOuts:[169,168,166,165,163,162,159],max:170,min:2,mentalMathMode:!1};function P(){const t=localStorage.getItem("dartsSettings");if(t){const e=JSON.parse(t);l.min=e.min??2,l.max=e.max??170,l.mentalMathMode=e.mentalMathMode??!1}}function W(){localStorage.setItem("dartsSettings",JSON.stringify({min:l.min,max:l.max,mentalMathMode:l.mentalMathMode}))}function F(t){t.min!==void 0&&(l.min=Math.max(2,Math.min(170,t.min))),t.max!==void 0&&(l.max=Math.max(2,Math.min(170,t.max))),t.mentalMathMode!==void 0&&(l.mentalMathMode=t.mentalMathMode),l.min>l.max&&([l.min,l.max]=[l.max,l.min]),W()}P();let N=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5],M=0,X=0,D=3,v=null,I=[],B=null,w=0,C=null;function j(){Y(),B=Date.now(),q(),C=setInterval(q,1e3)}function Y(){C&&(clearInterval(C),C=null)}function q(){const t=document.getElementById("timer-display");if(t&&B){const e=Math.floor((Date.now()-B)/1e3);t.textContent=`${e}s`}}function b(){let t;do t=Math.floor(Math.random()*(l.max-l.min+1))+l.min;while(l.noOuts.includes(t));return M=t,X=t,D=3,v=null,w=0,j(),A(),t}function A(){const t=document.getElementById("target-display"),e=document.getElementById("darts-display"),o=document.getElementById("game-status"),a=document.getElementById("history-display");t&&(l.mentalMathMode?t.textContent=X:t.textContent=M),e&&(e.textContent="ðŸŽ¯".repeat(D)),o&&(v==="win"?(o.textContent="WIN!",o.className="text-3xl font-bold mt-2 h-10 text-green-400"):v==="lose"?(o.textContent="LOSE",o.className="text-3xl font-bold mt-2 h-10 text-red-400"):(o.textContent="",o.className="text-3xl font-bold mt-2 h-10")),a&&(a.innerHTML=I.map(n=>`<div class="flex justify-between items-center px-2 py-1 ${n.result==="W"?"text-green-400":"text-red-400"}">
                <span class="font-bold">${n.result==="W"?"âœ“":"âœ—"}</span>
                <span>${n.target}</span>
                <span>${n.throws}ðŸŽ¯</span>
                <span>${n.time}s</span>
            </div>`).join(""))}function O(t){if(!t)return;const{text:e,value:o}=t,a=e.startsWith("D")||o===50;v!==null&&(v=null),w++,M-=o,D--;const n=r=>{Y();const i=Math.round((Date.now()-B)/1e3);I.unshift({result:r,time:i,throws:w,target:X}),I.length>10&&I.pop()};return M===0?(a?(v="win",n("W")):(v="lose",n("L")),setTimeout(()=>{b()},1500)):M<0?(v="lose",n("L"),setTimeout(()=>{b()},1500)):D===0&&(v="lose",n("L"),setTimeout(()=>{b()},1500)),A(),{text:e,value:o,isDouble:a}}function z(t){const o=360/t.length;let a=document.createElement("div");a.id="board",a.className="relative w-full aspect-square rounded-full mx-auto overflow-hidden",t.forEach((r,i)=>{const u=document.createElement("div");u.dataset.score=r;const p=i*o,f=i%2===0,h=o/2*Math.PI/180,s=50*Math.tan(h),c=50-s,x=50+s,g=f?"#1a1a1a":"#f5f5dc",y=f?"#dc2626":"#16a34a",E=f?"rgba(10,10,10,0.7)":"rgba(100,100,80,0.7)",k=`radial-gradient(circle closest-side at 50% 50%, 
            ${E} 0%, 
            ${E} 53%, 
            ${y} 53%, 
            ${y} 55%, 
            ${g} 55%, 
            ${g} 98%, 
            ${y} 98%, 
            ${y} 100%)`;u.className="absolute inset-0 flex items-start justify-center cursor-pointer transition-all hover:brightness-125 hover:z-10",u.style.cssText=`
            clip-path: polygon(50% 50%, ${c}% 0%, ${x}% 0%);
            transform: rotate(${p}deg);
            background: ${k};
        `;const L=document.createElement("span");L.className="mt-4 text-xs font-bold select-none",L.style.cssText=`
            transform: rotate(${-p}deg);
            color: ${f?"#f5f5dc":"#1a1a1a"};
        `,L.textContent=r,u.appendChild(L),u.dataset.score=r,u.dataset.originalBg=k,u.dataset.originalColor=f?"#f5f5dc":"#1a1a1a",a.appendChild(u)});const n=document.createElement("div");return n.className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-red-600 border-4 border-green-700 z-20 cursor-pointer hover:scale-110 transition-transform",n.dataset.score=50,a.appendChild(n),a}function S(t){const e=document.getElementById("board");if(!e)return 0;const o=e.getBoundingClientRect(),a=o.left+o.width/2,n=o.top+o.height/2,r=o.width/2,i=t.touches?t.touches[0].clientX:t.clientX,u=t.touches?t.touches[0].clientY:t.clientY,p=i-a,f=u-n;return Math.sqrt(p*p+f*f)/r*100}const $=53;let d=null;function R(){if(!d)return null;const t=d.dataset.score,e=d.dataset.mode;return e==="outerBull"?{text:"25",value:25}:e==="double"?{text:`D${t}`,value:parseInt(t)*2}:e==="triple"?{text:`T${t}`,value:parseInt(t)*3}:{text:t,value:parseInt(t)}}function H(){d&&(T(d),d=null)}function T(t){if(!t||!t.dataset.score)return;const e=t.querySelector("span");e&&(e.textContent=t.dataset.score,e.style.color=t.dataset.originalColor),t.style.background=t.dataset.originalBg,t.dataset.mode=""}function J(t){const e=t.target.closest("[data-score]");if(!e)return;if(e.dataset.score==="50"){d&&d!==e&&T(d),e.dataset.mode="outerBull",d=e,console.log("25");return}if(S(t)<$||(d&&d!==e&&T(d),!e.dataset.originalBg))return;const a=e.dataset.score,n=e.querySelector("span");if(!n)return;const i=N.indexOf(parseInt(a))%2===0;e.style.background=i?"#dc2626":"#16a34a",n.textContent=`D${a}`,n.style.color="#ffffff",e.dataset.mode="double",d=e,console.log(`D${a}`)}function U(t){const e=t.target.closest("[data-score]");if(!e||!e.dataset.originalBg||S(t)<$)return;const a=e.dataset.score,n=e.querySelector("span");if(!n)return;d&&d!==e&&T(d);const i=N.indexOf(parseInt(a))%2===0;e.style.background=i?"#dc2626":"#16a34a",n.textContent=`T${a}`,n.style.color="#ffffff",e.dataset.mode="triple",d=e,console.log(`T${a}`)}document.addEventListener("DOMContentLoaded",()=>{console.log("ðŸŽ¯ Darts app initialized"),V()});function V(){const t=z(N);document.getElementById("board-container").appendChild(t),_(),Z(),b()}function Z(){const t=document.getElementById("settings-btn"),e=document.getElementById("settings-modal"),o=document.getElementById("settings-close"),a=document.getElementById("settings-save"),n=document.getElementById("settings-min"),r=document.getElementById("settings-max"),i=document.getElementById("settings-mental-math");function u(){n.value=l.min,r.value=l.max,p(l.mentalMathMode)}function p(m){const h=i,s=h.querySelector("span");m?(h.classList.remove("bg-slate-600"),h.classList.add("bg-emerald-500"),s.classList.add("translate-x-5")):(h.classList.add("bg-slate-600"),h.classList.remove("bg-emerald-500"),s.classList.remove("translate-x-5")),h.dataset.enabled=m}t.addEventListener("click",()=>{u(),e.classList.remove("hidden"),e.classList.add("flex")});function f(){e.classList.add("hidden"),e.classList.remove("flex")}o.addEventListener("click",f),e.addEventListener("click",m=>{m.target===e&&f()}),i.addEventListener("click",()=>{const m=i.dataset.enabled==="true";p(!m)}),a.addEventListener("click",()=>{const m=parseInt(n.value)||2,h=parseInt(r.value)||170,s=i.dataset.enabled==="true";F({min:m,max:h,mentalMathMode:s}),f(),b()})}function _(){const t=document.getElementById("board");let e=!1,o=null,a=null,n=!1,r=!1;function i(){const s=t.getBoundingClientRect();return{x:s.left+s.width/2,y:s.top+s.height/2}}function u(s,c){const x=i(),g=s-x.x,y=c-x.y;return Math.sqrt(g*g+y*y)}function p(s,c,x){e=!0,n=!1,o=u(s,c),a=null;const g=x.target.closest("[data-score]"),y=g&&g.dataset.score==="50",E=S(x);r=y||E>=$}function f(s,c,x){if(!e||!r)return;const g=u(s,c);!a&&Math.abs(g-o)>5&&(a=g>o?"out":"in",n=!0),a==="out"?J(x):a==="in"&&U(x)}function m(s){if(a){const c=R();c&&O(c)}e=!1,o=null,a=null,r=!1,H()}function h(s){if(n){n=!1;return}const c=s.target.closest("[data-score]");if(c){if(c.dataset.score==="50")O({text:"50",value:50});else if(S(s)>=$){const g=parseInt(c.dataset.score);O({text:String(g),value:g})}}}t.addEventListener("mousedown",s=>p(s.clientX,s.clientY,s)),t.addEventListener("mousemove",s=>f(s.clientX,s.clientY,s)),t.addEventListener("mouseup",s=>m()),t.addEventListener("mouseleave",s=>m()),t.addEventListener("click",h),t.addEventListener("touchstart",s=>{const c=s.touches[0];p(c.clientX,c.clientY,s)},{passive:!0}),t.addEventListener("touchmove",s=>{const c=s.touches[0];f(c.clientX,c.clientY,s)},{passive:!0}),t.addEventListener("touchend",s=>m()),t.addEventListener("touchcancel",s=>m())}
